<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redux Store</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        #count {
            font-size: 2rem;
            margin: 20px;
        }
        button {
            font-size: 1rem;
            padding: 10px;
            margin: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Redux Store</h1>
    <div id="count">0</div>
    <button onclick="store.dispatch({ type: 'ADD' })">Add</button>
    <button onclick="store.dispatch({ type: 'SUBTRACT' })">Subtract</button>
    <button onclick="store.dispatch({ type: 'RESET' })">Reset</button>

    <script>
        function createStore(reducer) {
            let state;
            let listeners = [];

            const getState = () => state;
            
            const dispatch = (action) => {
                state = reducer(state, action);
                listeners.forEach(listener => listener());
            };
            
            const subscribe = (listener) => {
                listeners.push(listener);
                return () => {
                    listeners = listeners.filter(l => l !== listener);
                };
            };
            
            dispatch({});
            return { getState, dispatch, subscribe };
        }

        function counterReducer(state = { count: 0 }, action) {
            switch (action.type) {
                case "ADD":
                    return { count: state.count + 1 };
                case "SUBTRACT":
                    return { count: state.count - 1 };
                case "RESET":
                    return { count: 0 };
                default:
                    return state;
            }
        }

        const store = createStore(counterReducer);

        function updateUI() {
            document.getElementById("count").innerText = store.getState().count;
            console.log("State Updated:", store.getState());
        }

        store.subscribe(updateUI);
    </script>
</body>
</html>
